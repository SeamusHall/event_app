.row
  .col-lg-3
    = link_to "Show Valid Status", admin_orders_show_orders_valid_path, class: 'btn btn-success btn-block btn-lg'
  .col-lg-3
    = link_to "Show Progress Status", admin_orders_show_orders_progress_path, class: 'btn btn-warning btn-block btn-lg'
  .col-lg-3
    = link_to "Show Pending Status",  admin_orders_show_orders_pending_path, class: 'btn btn-danger btn-block btn-lg'
  .col-lg-3
    = link_to "Show Archived Status", admin_orders_show_orders_archived_path, class: 'btn btn-info btn-block btn-lg'

%h2 Event Orders

%hr
%div{style: "overflow-x:auto;"}
  %table.table
    %thead
      %tr
        %th ID
        %th Status
        %th Date
        %th Quantity
        %th Total
        %th First Name
        %th Last Name
        %th
    %tbody
      - @orders.each do |order|
        - unless order.user.nil?
          %tr{class: (order.status == Order::VALIDATED_STATUS ? 'success' : (order.status == Order::PROGRESS_STATUS) ? 'warning' : 'danger')}
            %td= order.id
            %td= current_user.has_role?(:admin) ? order.status : order.extended_status
            %td= order.created_at.strftime('%m-%e-%y %H:%M')
            %td= order.quantity
            %td= number_to_currency(order.total)
            %td= order.user.first_name
            %td= order.user.last_name
            %td
              = link_to 'show', admin_order_path(order), class: 'btn btn-success btn-block'
              = link_to 'edit', edit_admin_order_path(order), class: 'btn btn-warning btn-block'
              - if can?(:validate, order) and order.status == OrderProduct::PROGRESS_STATUS
                = link_to 'Validate', validate_admin_order_path(order), class: 'btn btn-info btn-block'
= paginate @orders

%br
%h2 Orders

%hr
%div{style: "overflow-x:auto;"}
  %table.table
    %thead
      %tr
        %th ID
        %th Status
        %th Date
        %th Total
        %th First Name
        %th Last Name
        %th
    %tbody
      - @order_products.each do |op|
        - unless op.user.nil?
          %tr{class: (op.status == OrderProduct::VALIDATED_STATUS ? 'success' : (op.status == OrderProduct::PROGRESS_STATUS) ? 'warning' : 'danger')}
            %td= op.id
            %td= current_user.has_role?(:admin) ? op.status : op.extended_status
            %td= op.created_at.strftime('%m-%e-%y %H:%M')
            %td= number_to_currency(op.total)
            %td= op.user.first_name
            %td= op.user.last_name
            %td
              = link_to 'show', admin_order_product_path(op), class: 'btn btn-success btn-block'
              = link_to 'edit', edit_admin_order_product_path(op), class: 'btn btn-warning btn-block'
              - if can?(:validate, op) and op.status == OrderProduct::PROGRESS_STATUS
                = link_to 'Validate', validate_admin_order_product_path(op), class: 'btn btn-info btn-block'
= paginate @order_products
