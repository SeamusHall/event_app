%h1= @order_product.check_status  ? "Receipt" : "Order Details"

- if @order_product.check_status
  .receipt
    .row
      .col-sm-6
        %address
          %address
            %p
              %strong Order Name:
              = @order_product.order_name
            %p
              %strong Phone #:
              = @order_product.user.phone
            %p
              %strong Address:
              = @order_product.user.address
            %p
              %strong City:
              = @order_product.user.city
            %p
              %strong State:
              = @order_product.user.state
            %p
              %strong Postal Code:
              = @order_product.user.postal_code
            %p
              %strong Country:
              = @order_product.user.country
          %p
            %strong Order Status:
            = @order_product.extended_status
      .col-xs-6.col-sm-6.col-md-6.text-right
        - if @order_product.finalized_on
          %p
            %em= "Verified On: #{@order_product.finalized_on.strftime('%m/%d/%Y %l:%M%p')}"
        - if @order_product.placed_at
          %p
            %em= "Auth Code: #{@order_product.auth_code}"
          %p
            %em= "Transaction ID: #{@order_product.transaction_id}"
          %p
            %em= "Placed At: #{@order_product.placed_at.strftime('%m/%d/%Y %l:%M%p')}"
          %p
            %em= "Order ID: #{@order_product.id}"
        - @order_product.order_product_items.each do |opi|
          - if (opi.product.attachments.first.content_type.include? 'image')
            = image_tag opi.product.attachments.first.url, width: "300"
          - else
            = videojs_rails sources: { mp4: opi.product.attachments.first.url }, class: 'video'
    %br
    .row
      %div{style: "overflow-x:auto;"}
        %table.table.table-hover
          %thead
            %tr
              %th Item Name
              %th Quantity
              %th Tax
              %th.text-center Total
          %tbody
            - @order_product.order_product_items.each do |opi|
              %tr
                %td= opi.product.name
                %td.text-center= opi.quantity
                %td.text-center= number_to_percentage(opi.product.tax * 100, precision: 0)
                %td.text-right= number_to_currency(opi.product.price)
            %tr
              %td  
              %td  
              %td.text-right
                %h4
                  %strong Total: 
              %td.text-center.text-danger
                %h4
                  %strong= @order_product.total
        %h1 Thank you for your order.
- else
  .row
    .col-xs-12.col-md-3.col-lg-3.pull-left
      .panel.panel-default.height
        .panel-heading Billing Details
        .panel-body
          %strong= @order_product.order_name
          %br
          = @order_product.user.address
          %br
          = @order_product.user.city
          %br
          = @order_product.user.state
          %br
          %strong= @order_product.user.postal_code
          %br
          = @order_product.user.country
    -#
      .col-xs-12.col-md-3.col-lg-3
        .panel.panel-default.height
          .panel-heading Payment Information
          .panel-body
            %strong Card Name:
            Visa
            %br/
            %strong Card Number:
            ***** 332
            %br/
            %strong Exp Date:
            09/2020
            %br/
      .col-xs-12.col-md-3.col-lg-3
        .panel.panel-default.height
          .panel-heading Order Preferences
          .panel-body
            %strong Gift:
            No
            %br/
            %strong Express Delivery:
            Yes
            %br/
            %strong Insurance:
            No
            %br/
            %strong Coupon:
            No
            %br/
      .col-xs-12.col-md-3.col-lg-3.pull-right
        .panel.panel-default.height
          .panel-heading Shipping Address
          .panel-body
            %strong David Peere:
            %br/
            1111 Army Navy Drive
            %br/
            Arlington
            %br/
            VA
            %br/
            %strong 22 203
            %br/

    .row
    .col-lg-12
      .panel.panel-default
        .panel-heading
          %h3.text-center
            %strong Order summary
        .panel-body
          .table-responsive
            %table.table.table-condensed
              %thead
                %tr
                  %td
                    %strong Item Name
                  %td.text-center
                    %strong Item Quantity
                  %td.text-center
                    %strong Tax
                  %td.text-right
                    %strong Item Price
              %tbody
                - @order_product.order_product_items.each do |opi|
                  %tr
                    %td= opi.product.name
                    %td.text-center= opi.quantity
                    %td.text-center= number_to_percentage(opi.product.tax * 100, precision: 0)
                    %td.text-right= number_to_currency(opi.product.price)
                %tr
                  %td.highrow
                  %td.highrow
                  %td.highrow.text-center
                    %strong Total
                  %td.highrow.text-right= number_to_currency(@order_product.total)
%br
= link_to 'Orders', orders_path, class: 'btn btn-primary btn-lg'
= link_to 'Modify Order', edit_order_product_path(@order_product), class: 'btn btn-info btn-lg' unless @order_product.check_status
= link_to 'Proceed to Checkout', purchase_order_product_path(@order_product), class: 'btn btn-success btn-lg' unless @order_product.check_status || @order_product.check_stock
